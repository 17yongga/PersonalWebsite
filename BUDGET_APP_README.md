# Budget Assistant - AI-Powered Personal Finance Application

An intelligent, automated budgeting assistant that helps you track spending, manage budgets, and make smarter financial decisions through AI-driven insights.

## Features

### ðŸ§¾ Receipt Scanning & Categorization
- Upload receipt images or take photos directly from your device
- AI-powered OCR extracts merchant, items, amounts, and dates automatically
- Intelligent categorization of expenses (groceries, dining, utilities, etc.)
- Support for multiple currencies (USD, CAD, EUR, GBP, and more)
- Automatic monthly spending aggregation

### ðŸ“Š Budget Management & Tracking
- Set monthly budgets by category
- Real-time tracking of spending vs. budget
- Visual dashboard with charts and graphs
- Category-level breakdowns with progress indicators

### ðŸ“§ Weekly Budget Reports
- Automated weekly email summaries
- Natural language insights generated by AI
- Total spend, category breakdowns, and remaining budget
- Actionable insights like "You're overspending on dining this week"

### ðŸ¤– Adaptive Budget Allocation
- AI analyzes historical spending patterns
- Recommendations for budget adjustments
- Explanations for suggested changes
- Helps optimize budget allocation over time

### ðŸ“± Mobile-First Design
- Responsive interface optimized for mobile browsers
- Clean, intuitive user experience
- Fast and lightweight

## Architecture

### Backend (`budget-backend/`)
- **Framework**: FastAPI (Python)
- **Database**: SQLite (easily upgradable to PostgreSQL)
- **AI**: OpenAI GPT-4 Vision for receipt OCR, GPT-4o-mini for categorization and insights
- **Email**: aiosmtplib for sending weekly reports

### Frontend (`budget.html`, `budget.css`, `budget.js`)
- Pure HTML/CSS/JavaScript (no framework dependencies)
- Chart.js for data visualizations
- Mobile-first responsive design
- Integrates with existing website styling

## Quick Start

### 1. Backend Setup

```bash
cd budget-backend

# Create virtual environment (recommended)
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Configure environment variables
cp .env.example .env
# Edit .env and add your OPENAI_API_KEY

# Create uploads directory
mkdir uploads

# Run the server
uvicorn main:app --reload --host 0.0.0.0 --port 8002
```

### 2. Frontend Setup

The frontend files (`budget.html`, `budget.css`, `budget.js`) are ready to use. Update the API URL in `budget.js` if needed:

```javascript
// The frontend automatically detects local vs production
// Local: http://localhost:8002 (port 8002 to avoid conflict with Ask-Gary on 8000)
// Production: https://gary-yong.com/api/budget
```

For production deployment on gary-yong.com:
```javascript
const API_BASE_URL = 'https://gary-yong.com/api/budget';
```

**Port Configuration**: The budget app uses port **8002** to avoid conflicts:
- Ask-Gary backend uses port **8000**
- Casino games use port **3001**
- Budget app uses port **8002**

See `PORT_ASSIGNMENTS.md` for complete port allocation details.

### 3. Access the Application

Open `budget.html` in your browser or serve it through your web server.

## Configuration

### Backend Configuration (`budget-backend/config.py`)

- **OpenAI API**: Required for receipt OCR and categorization
- **Database**: SQLite by default (update `DATABASE_URL` for PostgreSQL)
- **Email Settings**: Configure SMTP settings for weekly reports (optional)
- **Upload Directory**: Configure `UPLOAD_DIR` for receipt storage
- **Categories**: Customize default categories in `DEFAULT_CATEGORIES`

### Email Configuration

For weekly email reports, configure SMTP settings in `.env`:

```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
EMAIL_FROM=your_email@gmail.com
```

**Note**: For Gmail, you'll need to generate an App Password: https://support.google.com/accounts/answer/185833

## Deployment

### Development
- Backend: `uvicorn main:app --reload`
- Frontend: Serve via any static file server or open directly

### Production (gary-yong.com)

#### Backend (EC2)
1. Install dependencies in virtual environment
2. Set up systemd service (see `budget-backend/README.md`)
3. Configure nginx as reverse proxy
4. Set environment variables securely

#### Frontend (S3)
1. Upload `budget.html`, `budget.css`, `budget.js` to S3
2. Update API URL in `budget.js` to point to production backend
3. Configure S3 bucket for static website hosting

#### Nginx Configuration
```nginx
# Backend API
location /api/budget/ {
    proxy_pass http://localhost:8002/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

# Frontend
location /budget.html {
    # Serve from S3 or local static files
}
```

## API Documentation

The backend provides a RESTful API. Key endpoints:

- `POST /users` - Create user account
- `POST /users/{id}/receipts/upload` - Upload and process receipt
- `POST /users/{id}/transactions` - Add manual transaction
- `GET /users/{id}/summary` - Get spending summary
- `GET /users/{id}/recommendations` - Get budget recommendations
- `POST /users/{id}/send-weekly-report` - Trigger weekly email report

See `budget-backend/README.md` for full API documentation.

## Data Storage

- **Transactions**: Stored in SQLite database with full history
- **Budgets**: Monthly budgets per category per user
- **Receipt Images**: Stored in `uploads/` directory (consider S3 for production)
- **User Data**: Email, income, currency preferences

## Cost Considerations

- **OpenAI API**: 
  - GPT-4 Vision: ~$0.01-0.03 per receipt (depends on image size)
  - GPT-4o-mini: ~$0.0001-0.0003 per categorization/insight
- **Storage**: Minimal (SQLite database, receipt images)
- **Compute**: FastAPI is lightweight, minimal EC2 instance sufficient
- **Email**: Free with Gmail SMTP, or use AWS SES for scale

## Future Enhancements

- [ ] Multi-user authentication and security
- [ ] Recurring transactions
- [ ] Budget templates
- [ ] Export to CSV/PDF
- [ ] Mobile app (React Native/Flutter)
- [ ] Bank account integration (Plaid/Yodlee)
- [ ] Advanced analytics and forecasting
- [ ] Budget sharing and collaboration

## License

Part of the PersonalWebsite project.

