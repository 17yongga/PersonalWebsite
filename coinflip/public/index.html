<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coin Flip Game - Multiplayer Betting</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Welcome Screen -->
  <div id="welcomeScreen" class="screen">
    <div class="container">
      <h1 class="title">ü™ô Coin Flip Game</h1>
      <p class="subtitle">Multiplayer Betting Experience</p>
      <div class="welcome-form">
        <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="20">
        <button id="joinBtn" class="btn btn-primary">Join Game</button>
      </div>
      <div class="credits-info">Start with <span class="credit-amount">10,000</span> credits!</div>
      <div id="connectionStatus" class="connection-status" style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary); text-align: center;">
        <span id="statusIndicator">‚óè</span> Connecting...
      </div>
    </div>
  </div>

  <!-- Main Game Screen -->
  <div id="mainScreen" class="screen hidden">
    <!-- Top Menu Bar -->
    <header class="top-menu-bar">
      <div class="menu-left"></div>
      <div class="menu-center">
        <div class="player-badge">
          <span class="player-icon">üë§</span>
          <span id="playerNameDisplay"></span>
        </div>
        <div class="credits-display">
          <span class="credits-label">Credits:</span>
          <span id="creditsAmount" class="credit-amount">0</span>
        </div>
      </div>
      <div class="menu-right"></div>
    </header>

    <!-- Room Selection Section -->
    <div id="roomSelection" class="game-section">
      <h2>Available Rooms</h2>
      
      <!-- Bet Setup Section (for creating a room) -->
      <div class="bet-setup-section">
        <h3>Create a New Coin Flip Room</h3>
        <p class="setup-description">Set your bet amount and choice, then create the room</p>
        
        <div class="bet-input-group">
          <label for="createBetAmountInput">Bet Amount:</label>
          <input type="number" id="createBetAmountInput" placeholder="Enter bet amount" min="1" step="1">
          <div class="quick-bet-buttons">
            <button class="btn-quick-bet" data-amount="50">50</button>
            <button class="btn-quick-bet" data-amount="100">100</button>
            <button class="btn-quick-bet" data-amount="250">250</button>
            <button class="btn-quick-bet" data-amount="500">500</button>
            <button class="btn-quick-bet" data-amount="0">All</button>
          </div>
        </div>
        
        <div class="choice-buttons">
          <button id="createChooseHeadsBtn" class="btn-choice btn-heads">
            <span class="choice-icon">ü™ô</span>
            <span>Heads</span>
          </button>
          <button id="createChooseTailsBtn" class="btn-choice btn-tails">
            <span class="choice-icon">ü™ô</span>
            <span>Tails</span>
          </button>
        </div>
        
        <button id="createRoomBtn" class="btn btn-primary" disabled>Create Room</button>
      </div>

      <!-- Available Rooms List -->
      <div id="roomList" class="room-list"></div>
    </div>

    <!-- Game Room Section -->
    <div id="gameRoom" class="game-section hidden">
      <div class="room-header">
        <div class="room-id-display">
          <span>Room:</span>
          <span id="currentRoomId"></span>
        </div>
        <button id="leaveRoomBtn" class="btn btn-small">Leave Room</button>
      </div>

      <!-- Players Info -->
      <div class="players-container">
        <div class="player-card" id="player1Card">
          <div class="player-card-header">
            <span class="player-card-name" id="player1Name">You</span>
          </div>
          <div class="player-card-bet" id="player1Bet">No bet</div>
          <div class="player-card-choice" id="player1Choice"></div>
        </div>

        <div class="coin-container">
          <div id="coin" class="coin">
            <div class="coin-face coin-front">
              <span class="coin-text">H</span>
            </div>
            <div class="coin-face coin-back">
              <span class="coin-text">T</span>
            </div>
          </div>
          <div id="coinResult" class="coin-result"></div>
        </div>

        <div class="player-card" id="player2Card">
          <div class="player-card-header">
            <span class="player-card-name" id="player2Name">Opponent</span>
          </div>
          <div class="player-card-bet" id="player2Bet">No bet</div>
          <div class="player-card-choice" id="player2Choice"></div>
        </div>
      </div>

      <!-- Game Status -->
      <div id="gameStatus" class="game-status">
        <p id="statusMessage" class="status-message">Waiting for opponent...</p>
      </div>

      <!-- Confirmation Section (for Emily/joiner) -->
      <div id="confirmationSection" class="confirmation-section hidden">
        <div class="confirmation-info">
          <h3>Coin Flip Details</h3>
          <p><strong>Bet Amount:</strong> <span id="confirmBetAmount" class="credit-amount">0</span> credits</p>
          <div class="choice-comparison">
            <div class="choice-item">
              <p><strong>Creator's Choice:</strong></p>
              <div id="confirmCreatorChoice" class="choice-display"></div>
            </div>
            <div class="choice-item">
              <p><strong>Your Choice:</strong></p>
              <div id="confirmJoinerChoice" class="choice-display confirm-choice"></div>
            </div>
          </div>
          <p class="confirm-description">You will match the bet amount and bet on the opposite side of the creator.</p>
        </div>
        <div class="confirmation-buttons">
          <button id="confirmParticipationBtn" class="btn btn-primary">Confirm Participation</button>
          <button id="cancelParticipationBtn" class="btn btn-secondary" onclick="leaveRoom()">Leave Room</button>
        </div>
      </div>

      <!-- Results Section -->
      <div id="resultsSection" class="results-section hidden">
        <div id="resultMessage" class="result-message"></div>
      </div>
    </div>
  </div>

  <!-- Error Toast -->
  <div id="errorToast" class="toast hidden">
    <span id="errorMessage"></span>
  </div>

  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
