%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#38bdf8', 'primaryTextColor': '#fff', 'primaryBorderColor': '#1e40af', 'lineColor': '#38bdf8', 'secondaryColor': '#1e293b', 'tertiaryColor': '#0f172a'}}}%%
flowchart TB
    subgraph Internet["ğŸŒ Internet"]
        User["ğŸ‘¤ Visitors / Recruiters<br/>(Web Browser)"]
        CF["â˜ï¸ Cloudflare CDN<br/>gary-yong.com"]
    end

    subgraph AWS["â˜ï¸ AWS EC2 Instance"]
        subgraph Nginx["ğŸ”§ Nginx Reverse Proxy"]
            Static["ğŸ“„ Static Files<br/>gary-yong.com/*"]
            Proxy["ğŸ”€ API Proxy<br/>api.gary-yong.com"]
        end
        
        subgraph Frontend["ğŸ–¥ï¸ Frontend"]
            HTML["ğŸ“ ask-gary.html<br/>Chat Interface"]
            JS["âš¡ ask-gary.js<br/>Chat Logic"]
            CSS["ğŸ¨ styles.css"]
        end
        
        subgraph Backend["âš™ï¸ Backend (FastAPI)"]
            Main["ğŸ main.py<br/>/health, /chat"]
            Config["âš™ï¸ config.py<br/>Prompts & Settings"]
            Index["ğŸ“Š indexed_data.json<br/>Embedded Knowledge"]
        end
    end
    
    subgraph OpenAI["ğŸ¤– OpenAI API"]
        Embed["ğŸ”¢ Embeddings API<br/>text-embedding-3-small"]
        Chat["ğŸ’¬ Chat Completions<br/>gpt-4o-mini"]
    end

    User --> CF
    CF --> Nginx
    Static --> Frontend
    Proxy --> Backend
    JS --> Proxy
    Main --> Embed
    Main --> Chat
    Config --> Main
    Index --> Main
