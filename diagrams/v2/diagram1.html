<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<style>
body { 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    margin: 0; 
    padding: 50px; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    min-height: 100vh; 
}
.container { 
    background: #ffffff; 
    border-radius: 24px; 
    padding: 50px 60px; 
    box-shadow: 0 25px 80px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
    max-width: 1100px;
}
h1 { 
    color: #1a1a2e; 
    text-align: center; 
    font-family: 'Segoe UI', system-ui, sans-serif; 
    margin-bottom: 10px; 
    font-size: 2rem;
    font-weight: 700;
}
.subtitle {
    color: #6b7280;
    text-align: center;
    font-family: 'Segoe UI', system-ui, sans-serif;
    margin-bottom: 35px;
    font-size: 1rem;
}
.mermaid { display: flex; justify-content: center; }
</style>
</head><body>
<div class="container">
<h1>ğŸ—ï¸ Ask Gary - Solution Architecture</h1>
<p class="subtitle">High-level system overview showing all components and integrations</p>
<div class="mermaid">
flowchart TB
    subgraph Internet["ğŸŒ INTERNET"]
        User["ğŸ‘¤ Visitors & Recruiters<br/>Web Browser"]
        CF["â˜ï¸ Cloudflare CDN<br/>gary-yong.com"]
    end

    subgraph AWS["â˜ï¸ AWS EC2 INSTANCE"]
        subgraph Nginx["ğŸ”§ NGINX REVERSE PROXY"]
            Static["ğŸ“„ Static Files<br/>gary-yong.com/*"]
            Proxy["ğŸ”€ API Proxy<br/>api.gary-yong.com"]
        end
        
        subgraph Frontend["ğŸ–¥ï¸ FRONTEND"]
            HTML["ğŸ“ ask-gary.html<br/>Chat Interface"]
            JS["âš¡ ask-gary.js<br/>Client Logic"]
            CSS["ğŸ¨ styles.css<br/>Styling"]
        end
        
        subgraph Backend["âš™ï¸ BACKEND - FastAPI"]
            Main["ğŸ main.py<br/>/health & /chat"]
            Config["âš™ï¸ config.py<br/>Settings"]
            Index["ğŸ“Š indexed_data.json<br/>Embeddings"]
        end
    end
    
    subgraph OpenAI["ğŸ¤– OPENAI API"]
        Embed["ğŸ”¢ Embeddings<br/>text-embedding-3-small"]
        Chat["ğŸ’¬ Chat Completions<br/>gpt-4o-mini"]
    end

    User ==> CF
    CF ==> Nginx
    Static --> Frontend
    Proxy --> Backend
    JS -.->|"POST /chat"| Proxy
    Main --> Embed
    Main --> Chat
    Config --> Main
    Index --> Main
</div>
</div>
<script>
mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
        primaryColor: '#6366f1',
        primaryTextColor: '#ffffff',
        primaryBorderColor: '#4f46e5',
        lineColor: '#6366f1',
        secondaryColor: '#f1f5f9',
        tertiaryColor: '#e0e7ff',
        background: '#ffffff',
        mainBkg: '#6366f1',
        secondBkg: '#f8fafc',
        textColor: '#1e293b',
        nodeTextColor: '#ffffff',
        clusterBkg: '#f1f5f9',
        clusterBorder: '#cbd5e1',
        edgeLabelBackground: '#ffffff'
    },
    flowchart: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'basis',
        nodeSpacing: 50,
        rankSpacing: 60
    }
});
</script>
</body></html>
